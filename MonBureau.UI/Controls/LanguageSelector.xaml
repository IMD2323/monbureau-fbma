<UserControl
    x:Class="MonBureau.UI.Controls.LanguageSelector"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>
        <Style x:Key="LanguageButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="12,8" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            x:Name="border"
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FFFFFF20" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FFFFFF30" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="LanguageMenuItem" TargetType="MenuItem">
            <Setter Property="Header" Value="{Binding}" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Padding" Value="12,8" />
        </Style>
    </UserControl.Resources>

    <Grid>
        <Button
            x:Name="LanguageMenuButton"
            Padding="10,6"
            Click="LanguageMenuButton_Click"
            Style="{StaticResource LanguageButton}">
            <StackPanel Orientation="Horizontal">
                <TextBlock
                    Margin="0,0,8,0"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="16"
                    Text="&#xE774;" />
                <TextBlock
                    x:Name="CurrentLanguageText"
                    VerticalAlignment="Center"
                    FontWeight="Medium"
                    Text="Français" />
            </StackPanel>
        </Button>

        <!--  Language Selection Popup  -->
        <Popup
            x:Name="LanguagePopup"
            AllowsTransparency="True"
            Placement="Bottom"
            PlacementTarget="{Binding ElementName=LanguageMenuButton}"
            StaysOpen="False">
            <Border
                Padding="4"
                Background="White"
                BorderBrush="#E5E7EB"
                BorderThickness="1"
                CornerRadius="8">
                <Border.Effect>
                    <DropShadowEffect
                        BlurRadius="15"
                        Opacity="0.2"
                        ShadowDepth="2"
                        Color="#000000" />
                </Border.Effect>

                <StackPanel>
                    <!--  French  -->
                    <Button
                        x:Name="FrenchButton"
                        MinWidth="150"
                        Padding="12,10"
                        HorizontalContentAlignment="Left"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="SelectFrench_Click"
                        Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border
                                                x:Name="border"
                                                Padding="{TemplateBinding Padding}"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="6">
                                                <ContentPresenter />
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#F3F4F6" />
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                Margin="0,0,12,0"
                                FontSize="20"
                                Text="🇫🇷" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                Text="Français" />
                        </StackPanel>
                    </Button>

                    <!--  English  -->
                    <Button
                        x:Name="EnglishButton"
                        MinWidth="150"
                        Margin="0,4,0,0"
                        Padding="12,10"
                        HorizontalContentAlignment="Left"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="SelectEnglish_Click"
                        Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border
                                                x:Name="border"
                                                Padding="{TemplateBinding Padding}"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="6">
                                                <ContentPresenter />
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#F3F4F6" />
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                Margin="0,0,12,0"
                                FontSize="20"
                                Text="🇬🇧" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                Text="English" />
                        </StackPanel>
                    </Button>

                    <!--  Arabic  -->
                    <Button
                        x:Name="ArabicButton"
                        MinWidth="150"
                        Margin="0,4,0,0"
                        Padding="12,10"
                        HorizontalContentAlignment="Left"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="SelectArabic_Click"
                        Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border
                                                x:Name="border"
                                                Padding="{TemplateBinding Padding}"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="6">
                                                <ContentPresenter />
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#F3F4F6" />
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                Margin="0,0,12,0"
                                FontSize="20"
                                Text="🇩🇿" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                Text="العربية" />
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Border>
        </Popup>
    </Grid>
</UserControl>