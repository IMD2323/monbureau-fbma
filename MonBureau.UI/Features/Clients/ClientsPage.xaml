<Page
    x:Class="MonBureau.UI.Features.Clients.ClientsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="{StaticResource BackgroundBrush}">

    <Grid Margin="32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Loading Overlay - FIXED  -->
        <ContentControl
            Grid.RowSpan="4"
            Content="{Binding}"
            ContentTemplate="{StaticResource LoadingOverlayTemplate}" />

        <!--  Page Header - FIXED  -->
        <ContentControl
            Grid.Row="0"
            Content="{Binding}"
            ContentTemplate="{StaticResource PageHeaderTemplate}" />

        <!--  Search Bar - FIXED  -->
        <ContentControl
            Grid.Row="1"
            Content="{Binding}"
            ContentTemplate="{StaticResource SearchBarTemplate}" />

        <!--  Clients DataGrid  -->
        <Border
            Grid.Row="2"
            Padding="24"
            Background="White"
            CornerRadius="12"
            Visibility="{Binding Items.Count, Converter={StaticResource BoolToVis}}">
            <DataGrid
                AutoGenerateColumns="False"
                BorderThickness="0"
                CanUserAddRows="False"
                GridLinesVisibility="None"
                ItemsSource="{Binding Items}"
                RowHeight="60"
                SelectedItem="{Binding SelectedItem}">
                <DataGrid.Columns>
                    <DataGridTextColumn
                        Width="*"
                        Binding="{Binding FullName}"
                        Header="Nom Complet">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontWeight" Value="Medium" />
                                <Setter Property="FontSize" Value="14" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn
                        Width="*"
                        Binding="{Binding ContactEmail}"
                        Header="Email" />

                    <DataGridTextColumn
                        Width="150"
                        Binding="{Binding ContactPhone}"
                        Header="Téléphone" />

                    <DataGridTemplateColumn Width="150" Header="Actions">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ContentControl Content="{Binding}" ContentTemplate="{StaticResource ActionButtonsTemplate}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!--  Empty State - FIXED  -->
        <ContentControl
            Grid.Row="2"
            Content="{Binding}"
            ContentTemplate="{StaticResource EmptyStateTemplate}" />

        <!--  Pagination - FIXED  -->
        <ContentControl
            Grid.Row="3"
            Content="{Binding}"
            ContentTemplate="{StaticResource PaginationTemplate}" />
    </Grid>
</Page>