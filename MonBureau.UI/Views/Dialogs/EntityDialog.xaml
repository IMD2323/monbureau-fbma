<!--  EntityDialog.xaml - COMPLETE FIXED VERSION  -->
<Window
    x:Class="MonBureau.UI.Views.Dialogs.EntityDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:MonBureau.UI.Converters"
    Title="Éditer"
    Width="800"
    Height="600"
    ResizeMode="CanResize"
    WindowStartupLocation="CenterOwner">

	<Window.Resources>
		<converters:BoolToVisibilityConverter x:Key="BoolToVis" />
		<FontFamily x:Key="IconFont">Segoe MDL2 Assets</FontFamily>
	</Window.Resources>

	<Border Margin="20" Style="{StaticResource Card}">
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<!--  Header  -->
			<StackPanel Grid.Row="0" Margin="0,0,0,20">
				<TextBlock
                    x:Name="TitleText"
                    FontSize="24"
                    FontWeight="Bold"
                    Foreground="{StaticResource TextPrimaryBrush}"
                    Text="Éditer" />
				<TextBlock
                    Margin="0,4,0,0"
                    FontSize="13"
                    Foreground="{StaticResource TextSecondaryBrush}"
                    Text="Complétez les informations ci-dessous" />
			</StackPanel>

			<!--  Dynamic Form Container  -->
			<ScrollViewer
                Grid.Row="1"
                HorizontalScrollBarVisibility="Disabled"
                VerticalScrollBarVisibility="Auto">
				<StackPanel x:Name="FormContainer" />
			</ScrollViewer>

			<!--  Error Message  -->
			<Border
                Grid.Row="1"
                Margin="0,8,0,0"
                Padding="12"
                VerticalAlignment="Bottom"
                Background="#FEE2E2"
                BorderBrush="{StaticResource ErrorBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Visibility="Collapsed">
				<TextBlock
                    x:Name="ErrorMessageText"
                    Foreground="{StaticResource ErrorBrush}"
                    TextWrapping="Wrap" />
			</Border>

			<!--  Buttons  -->
			<Grid Grid.Row="2" Margin="0,20,0,0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>

				<Button
                    x:Name="CancelButton"
                    Grid.Column="1"
                    Margin="0,0,12,0"
                    Padding="24,12"
                    Click="Cancel_Click"
                    Content="Annuler"
                    Style="{StaticResource OutlineButton}" />

				<Button
                    x:Name="SaveButton"
                    Grid.Column="2"
                    Padding="24,12"
                    Click="Save_Click"
                    Content="Enregistrer"
                    Style="{StaticResource ModernButton}" />
			</Grid>
		</Grid>
	</Border>
</Window>